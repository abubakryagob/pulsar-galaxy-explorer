<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pulsar Galaxy Explorer</title>
  <link rel="stylesheet" href="assets/css/style.css">
  
  <!-- Import Map for Three.js -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.163.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.163.0/examples/jsm/"
      }
    }
  </script>
</head>
<body>
  <div id="error-display"></div>

  <div id="loading">
    <span>Loading Pulsar Galaxy...</span>
    <div id="progress-container">
      <div id="progress"></div>
    </div>
  </div>

  <div id="ui">
    <div id="info">Pulsar Galaxy Explorer - 4,342 Pulsars with Real Video<br>
    <small>Click pulsars to see real pulsar videos at their actual frequencies â€¢ Video speed adjusts to match each pulsar's period</small>
    </div>
  </div>

  <div id="audio-controls">
    <button id="mute-btn">ðŸ”‡ Unmute Audio</button>
    <div class="volume-control">
      <input type="range" id="volume-slider" min="0" max="100" value="15" title="Volume">
    </div>
    <div id="pulsar-sound-info">Select a pulsar to hear its frequency</div>
  </div>

  <div id="controls-panel">
    <div class="control-group">
      <label>Filter Pulsars:</label>
      <div class="btn-group">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="fast" style="border-color: #4488ff; color: #4488ff;">Fast (&lt;0.1s)</button>
        <button class="filter-btn" data-filter="medium" style="border-color: #00ffff; color: #00ffff;">Medium</button>
        <button class="filter-btn" data-filter="slow" style="border-color: #aa44ff; color: #aa44ff;">Slow (&gt;1s)</button>
      </div>
      <div style="margin-top: 8px; font-size: 12px; color: #aaa; text-align: center;">
        Visible: <span id="visible-count">--</span>
      </div>
    </div>
  </div>

  <div id="video-panel">
    <div id="video-header">
      <span id="video-title">Pulsar Emission</span>
      <button id="close-video">Ã—</button>
    </div>
    <div id="video-container">
      <video id="pulsar-video" loop playsinline muted>
        <source src="assets/media/PulsarWithProfile.480p.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div id="video-overlay">
        <div id="video-stats">
          <div>PSR: <span id="vid-psr-name">--</span></div>
          <div>Period: <span id="vid-psr-period">--</span> s</div>
          <div>Playback: <span id="vid-playback-rate">1.0</span>x</div>
        </div>
      </div>
    </div>
    <div id="video-controls">
      <div id="scan-line"></div>
    </div>
  </div>

  <div id="pulsar-details">
    <h2 id="pulsar-name">Select a Pulsar</h2>
    <div class="detail-row">
      <span class="detail-label">Period:</span>
      <span class="detail-value" id="pulsar-period">--</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">Frequency:</span>
      <span class="detail-value" id="pulsar-frequency">--</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">Distance:</span>
      <span class="detail-value" id="pulsar-distance">--</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">DM:</span>
      <span class="detail-value" id="pulsar-dm">--</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">Coordinates:</span>
      <span class="detail-value" id="pulsar-coords">--</span>
    </div>
  </div>

  <!-- Main Application Script -->
  <script type="module" src="assets/js/app.js"></script>
</body>
</html>
